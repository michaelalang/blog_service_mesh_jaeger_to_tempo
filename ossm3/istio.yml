apiVersion: sailoperator.io/v1
kind: Istio
metadata:
  name: default
spec:
  namespace: istio-system
  updateStrategy:
    inactiveRevisionDeletionGracePeriodSeconds: 30
    type: InPlace
  values:
    global:
      istioNamespace: istio-system
      platform: openshift
    meshConfig:
      defaultProviders:
        tracing:
          - otel
      discoverySelectors:
        - matchExpressions:
            - key: maistra.io/member-of
              operator: DoesNotExist
            - key: istio.io/rev
              operator: Exists
      extensionProviders:
        - name: otel
          opentelemetry:
            port: 4317
            service: user-collector.istio-system.svc.cluster.local
    telemetry:
      enabled: true
      v2:
        enabled: true
        prometheus:
          enabled: true
  version: v1.26-latest
